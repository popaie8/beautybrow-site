---
import yaml from 'js-yaml';
import fs from 'fs';
import path from 'path';

const brandData = yaml.load(
  fs.readFileSync(path.resolve('./src/data/brand.yaml'), 'utf8')
) as any;

const currentYear = new Date().getFullYear();

const footerLinks = {
  service: [
    { href: '/about', label: 'こだわり' },
    { href: '/menu', label: 'メニュー・料金' },
    { href: '/flow', label: '施術の流れ' },
    { href: '/salon', label: '店舗情報' },
  ],
  support: [
    { href: '/recruit', label: '採用情報' },
    { href: '/contact', label: 'お問い合わせ' },
    { href: '/privacy', label: 'プライバシーポリシー' },
  ],
};
---

<footer class="footer">
  <div class="footer-upper">
    <div class="container">
      <div class="footer-grid">
        <!-- ブランド情報 -->
        <div class="footer-brand">
          <div class="footer-logo">
            <span class="footer-logo-text">Beauty Brow</span>
            <span class="footer-logo-sub">眉×まつ毛パーマ専門</span>
          </div>
          <p class="footer-description">
            柏駅徒歩5分。完全個室の眉×まつ毛パーマ専門サロン。<br />
            骨格・毛流に合わせた似合わせ設計で、理想の目元へ。
          </p>
          <div class="footer-social">
            <a href={brandData.social.instagram} target="_blank" rel="noopener" aria-label="Instagram" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
              </svg>
            </a>
            <a href={brandData.social.line} target="_blank" rel="noopener" aria-label="LINE" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 512 512" fill="currentColor">
                <path d="M256 0C114.62 0 0 89.61 0 200c0 93.87 82.89 172.58 194.64 193.87-7.71 23.29-28 84.85-28.79 97.88-.95 15.73 5.77 15.5 12.16 11.27s108.17-73.23 108.17-73.23C406.85 418.47 512 319.9 512 200 512 89.61 397.38 0 256 0z"/>
              </svg>
            </a>
            <a href={brandData.social.hotpepper} target="_blank" rel="noopener" aria-label="HotPepper Beauty" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </a>
          </div>
        </div>
        
        <!-- サービスリンク -->
        <div class="footer-column">
          <h3 class="footer-heading">サービス</h3>
          <ul class="footer-links">
            {footerLinks.service.map((link) => (
              <li>
                <a href={link.href} class="footer-link">{link.label}</a>
              </li>
            ))}
          </ul>
        </div>
        
        <!-- サポートリンク -->
        <div class="footer-column">
          <h3 class="footer-heading">サポート</h3>
          <ul class="footer-links">
            {footerLinks.support.map((link) => (
              <li>
                <a href={link.href} class="footer-link">{link.label}</a>
              </li>
            ))}
          </ul>
        </div>
        
        <!-- アクセス情報 -->
        <div class="footer-column">
          <h3 class="footer-heading">アクセス</h3>
          <div class="footer-access">
            <div class="access-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
              <p>
                〒277-0852<br />
                千葉県柏市旭町1-8-9<br />
                エリートイン柏903
              </p>
            </div>
            <div class="access-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
              </svg>
              <p>
                営業時間：10:00〜21:00<br />
                定休日：不定休
              </p>
            </div>
            <div class="access-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
              </svg>
              <p>
                <a href="tel:047-123-4567" class="footer-tel">047-123-4567</a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="footer-lower">
    <div class="container">
      <div class="footer-bottom">
        <p class="copyright">
          &copy; {currentYear} Beauty Brow. All rights reserved.
        </p>
        <p class="company">
          運営会社：株式会社D'Group
        </p>
      </div>
    </div>
  </div>
</footer>

<style>
  .footer {
    background: var(--color-bg-muted);
    margin-top: auto;
  }
  
  .footer-upper {
    padding: 4rem 0 3rem;
    border-bottom: 1px solid var(--color-border);
  }
  
  .container {
    max-width: var(--container-width, 1120px);
    margin: 0 auto;
    padding: 0 2rem;
  }
  
  .footer-grid {
    display: grid;
    grid-template-columns: 1.5fr 1fr 1fr 1.5fr;
    gap: 3rem;
  }
  
  .footer-brand {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .footer-logo {
    display: flex;
    flex-direction: column;
  }
  
  .footer-logo-text {
    font-family: var(--font-serif);
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--color-text);
    letter-spacing: 0.02em;
  }
  
  .footer-logo-sub {
    font-size: 0.625rem;
    color: var(--color-text-muted);
    letter-spacing: 0.1em;
    margin-top: 2px;
  }
  
  .footer-description {
    color: var(--color-text-muted);
    font-size: 0.875rem;
    line-height: 1.7;
  }
  
  .footer-social {
    display: flex;
    gap: 1rem;
    margin-top: 0.5rem;
  }
  
  .social-link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: white;
    color: var(--color-text-muted);
    transition: var(--transition-fast);
  }
  
  .social-link:hover {
    background: var(--color-accent);
    color: white;
    transform: translateY(-2px);
  }
  
  .footer-column {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .footer-heading {
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--color-text);
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }
  
  .footer-links {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }
  
  .footer-link {
    color: var(--color-text-muted);
    text-decoration: none;
    font-size: 0.875rem;
    transition: var(--transition-fast);
  }
  
  .footer-link:hover {
    color: var(--color-accent);
  }
  
  .footer-access {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .access-item {
    display: flex;
    gap: 0.75rem;
    color: var(--color-text-muted);
    font-size: 0.875rem;
    line-height: 1.6;
  }
  
  .access-item svg {
    flex-shrink: 0;
    margin-top: 2px;
  }
  
  .footer-tel {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: var(--transition-fast);
  }
  
  .footer-tel:hover {
    color: var(--color-accent);
  }
  
  .footer-lower {
    padding: 1.5rem 0;
  }
  
  .footer-bottom {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.75rem;
    color: var(--color-text-muted);
  }
  
  .copyright {
    margin: 0;
  }
  
  .company {
    margin: 0;
  }
  
  /* タブレット対応 */
  @media (max-width: 1024px) {
    .footer-grid {
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
    }
    
    .footer-brand {
      grid-column: 1 / -1;
    }
  }
  
  /* モバイル対応 */
  @media (max-width: 768px) {
    .footer-upper {
      padding: 3rem 0 2rem;
      margin-bottom: 80px; /* モバイルCTAバーの高さ分 */
    }
    
    .container {
      padding: 0 1rem;
    }
    
    .footer-grid {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
    
    .footer-bottom {
      flex-direction: column;
      gap: 0.5rem;
      text-align: center;
    }
  }
</style>